import {gql} from 'apollo-server'
import {concat} from 'ramda'
import {scalarSchema} from './scalarType'
import {modelSchema, modelMutationSchema, modelQuerySchema} from './model-schema-resolver'
import {mutationSchema as bizMutationSchema, querySchema as bizQuerySchema,apiSchema} from './biz-servers'


const querySchema = concat(bizQuerySchema,modelQuerySchema)
const mutationSchema = concat(bizMutationSchema,modelMutationSchema)

const schema = [
    `type Count{ count: Int }`,
    ...apiSchema,
    ...scalarSchema,
    ...modelSchema,
]

schema.push(`type Query {\n${querySchema.join('\n')}\n}`)
schema.push(`type Mutation {\n${mutationSchema.join('\n')}\n}`)

export default gql`${schema.join('\n')}`